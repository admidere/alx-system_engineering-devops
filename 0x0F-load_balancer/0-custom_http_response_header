#!/usr/bin/env bash
# Update packages and install Nginx
apt-get update
apt-get -y install nginx

# Create a directory for the custom header configuration file
mkdir -p /etc/nginx/conf.d/

# Create a new configuration file for the custom header
cat > /etc/nginx/conf.d/custom_header.conf << EOF
add_header X-Served-By \$hostname;
EOF

# Remove the default Nginx configuration file
rm /etc/nginx/sites-enabled/default

# Copy the Nginx configuration from web-01
scp -r root@web-01:/etc/nginx/sites-available/* /etc/nginx/sites-available/
ln -sf /etc/nginx/sites-available/* /etc/nginx/sites-enabled/

# Restart Nginx
systemctl restart nginx
