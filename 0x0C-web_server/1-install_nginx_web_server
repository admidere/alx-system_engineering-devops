#!/usr/bin/env bash
# Install nginx on your web-01

# Update package list and install nginx
sudo apt-get update
sudo apt-get install nginx -y

# Configure nginx to listen on port 80
sudo sed -i 's/listen\s*80;/listen 80 default_server;/g' /etc/nginx/sites-available/default

# Restart nginx
sudo service nginx restart

# Create index.html file with "Hello World!" message
echo "Hello World!" | sudo tee /var/www/html/index.html

# Test nginx by querying it at its root with curl
curl -s http://localhost:80 | grep "Hello World!" > /dev/null

# Check if curl command was successful
if [ $? -eq 0 ]; then
  echo "Nginx successfully installed and configured!"
else
  echo "Nginx installation and configuration failed."
fi
