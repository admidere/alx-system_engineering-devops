#!/usr/bin/env bash
# Install nginx if not already installed
if [ ! -x "$(command -v nginx)" ]; then
  sudo apt update
  sudo apt install -y nginx
fi

# Configure nginx to redirect /redirect_me to https://www.youtube.com/watch?v=QH2-TGUlwu4
sudo tee /etc/nginx/sites-available/redirect_me <<EOF
server {
    listen 80 default_server;
    listen [::]:80 default_server;

    # Redirect /redirect_me to https://www.youtube.com/watch?v=QH2-TGUlwu4 with a 301 status code
    return 301 https://www.youtube.com/watch?v=QH2-TGUlwu4$request_uri;
}
EOF

# Enable the new configuration
sudo ln -s /etc/nginx/sites-available/redirect_me /etc/nginx/sites-enabled/

# Add "Hello World!" to the default index.html file
echo "Hello World!" | sudo tee /var/www/html/index.html

# Test the configuration and restart nginx
sudo nginx -t
sudo service nginx restart
